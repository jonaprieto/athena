<h1>Athena <a href="https://travis-ci.org/jonaprieto/athena"><img src="https://travis-ci.org/jonaprieto/athena.svg?branch=master" alt="Build Status"></a> <a href="https://zenodo.org/badge/latestdoi/85713337"><img src="https://zenodo.org/badge/85713337.svg" alt="DOI"></a></h1>
<p><img src="https://raw.githubusercontent.com/jonaprieto/athena/master/slides/diagram.png" alt="diagram"></p>
<p><strong>Athena</strong> is a <a href="http://www.haskell.org">Haskell</a> program that translates
proposition proofs generated by <a href="http://github.com/gilith/metis">Metis</a> to <a href="http://github.com/agda/agda">Agda</a> code.</p>
<h3>Documentation</h3>
<ul>
<li><a href="https://github.com/jonaprieto/athena/files/1425065/Prieto-Cubides.-.2017.-.Reconstructing.Propositional.Proofs.in.Type.Theory.pdf">Reconstructing Propositional Proofs in Type Theory</a></li>
<li>See our last <a href="https://github.com/jonaprieto/athena/raw/master/slides/Jonathan-Proof-Reconstruction.pdf">talk</a> for a briefly introduction of this tool.</li>
</ul>
<h3>Installing</h3>
<p>Clone this repository:</p>
<pre><code>$ git clone https://github.com/jonaprieto/athena.git
$ cd athena
$ make install
$ make install-libraries
</code></pre>
<p>Athena was tested with:</p>
<ul>
<li>GHC v8.0.2 and GHC v8.2.1</li>
<li><a href="http://github.com/agda/agda">Agda</a> v2.5.3</li>
<li><a href="http://github.com/gilith/metis">Metis</a> v2.3 (release 20170810)</li>
<li>[optional]: benefit of at least forty provers including Metis: <a href="http://github.com/jonaprieto/online-atps">OnlineATPs</a>.</li>
</ul>
<h3>Testing</h3>
<p>In order to test the installation of Athena, you can try to reconstruct a simple proof.</p>
<p>First, let us write the problem <img src="https://tex.s2cms.ru/svg/%5Cinline%5C%7B%20p%20%2C%20q%5C%7D%20%5Cvdash%20p%20%5Cwedge%20q" alt="\inline\{ p , q\} \vdash p \wedge q" /> in TPTP to generate the solution using <a href="http://github.com/gilith/metis">metis</a>.</p>
<pre><code>$ cat problem.tptp
fof(a1, axiom, p).
fof(a2, axiom, q).
fof(goal, conjecture, p &amp; q).
</code></pre>
<p>To get the TSTP proof run the following command:</p>
<pre><code>$ metis --show proof problem.tptp &gt; problem.tstp
$ cat problem.tstp
...
fof(a1, axiom, (p)).
fof(a2, axiom, (q)).
fof(goal, conjecture, (p &amp; q)).
fof(subgoal_0, plain, (p), inference(strip, [], [goal])).
...
    inference(simplify, [],
              [normalize_1_0, normalize_1_1, normalize_1_2])).
cnf(refute_1_0, plain, ($false),
    inference(canonicalize, [], [normalize_1_3])).
% SZS output end CNFRefutation for conj-01.tptp
</code></pre>
<p>Or if you are using <a href="http://github.com/jonaprieto/online-atps">online-atps</a>:</p>
<pre><code>$ online-atps --atp=metis problem.tptp &gt; problem.tstp
</code></pre>
<p>Now, let us generate the Agda code using Athena:</p>
<pre><code>$ athena problem.tstp
</code></pre>
<p>Remember that Athena named the Agda file with the same name of the TSTP solution:</p>
<pre><code class="language-agda">$ cat problem.agda
...
-- Axioms.

a₁ : PropFormula
a₁ = p

a₂ : PropFormula
a₂ = q

-- Premises.

Γ : Ctxt
Γ = ∅ , a₁ , a₂

-- Conjecture.

goal : PropFormula
goal = (p ∧ q)

-- Subgoals.

subgoal₀ : PropFormula
subgoal₀ = p

subgoal₁ : PropFormula
subgoal₁ = (p ⇒ q)

------------------------------------------------------------------------------
-- Proof.
------------------------------------------------------------------------------

proof₀ : Γ ⊢ subgoal₀
proof₀ =
  (RAA
    (thm-simplify ⊥
      (assume {Γ = Γ} (¬ subgoal₀))
      (thm-canonicalize-axiom p
        (weaken-Δ₁
          (∅ , a₂ , ¬ subgoal₀)
          assume {Γ = ∅} a₁))))

proof₁ : Γ ⊢ subgoal₁
proof₁ =
  (RAA
    (thm-simplify ⊥
      (thm-canonicalize-axiom p
        (weaken-Δ₁
          (∅ , a₂ , ¬ subgoal₁)
          assume {Γ = ∅} a₁))
      (thm-simplify ⊥
        (thm-canonicalize ((¬ q) ∧ p)
          (assume {Γ = Γ} (¬ subgoal₁)))
        (thm-canonicalize-axiom q
          (weaken (¬ subgoal₁)
            assume {Γ = [ a₁ ]} a₂)))))

proof : Γ ⊢ goal
proof =
  ⇒-elim
    thm-strip
    (∧-intro proof₀ proof₁)
</code></pre>
<p>Finally, we type-check the proof. At this stage, we will assume you’ve already
installed successfully the libraries <a href="http://github.com/jonaprieto/agda-prop">agda-prop</a>, and <a href="http://github.com/jonaprieto/agda-metis">agda-metis</a> and
<a href="http://github.com/agda/agda-stdlib">agda-stdlib</a> libraries.</p>
<pre><code class="language-agda">$ agda problem.agda
</code></pre>
<p>If everything works as we expected, Agda will generate an interface file as
result of the type-checking. At the end, we should have four files: the TPTP
problem, the TSTP solution, the Agda proof-term, and the Agda interface file.</p>
<pre><code>$ tree .
.
├── problem.agda
├── problem.iagda
├── problem.tptp
└── problem.tstp
</code></pre>
