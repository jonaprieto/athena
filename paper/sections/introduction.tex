
\documentclass[../main.tex]{subfiles}
\begin{document}

% ===================================================================

\section{Introduction}
\label{sec:introduction}

An automatic theorem prover (henceforth \ATP) is a program that
intends to prove conjectures from axioms and inference rules of some
logical system. In the last decades, \ATPs are fast becoming a key
instrument in different disciplines and real applications (\eg,
verifying railway interlocking systems~\cite{Kanso2012}). Since some
bugs have been found in these programs (see, for example,
\cite{Keller2013,Bohme2011,Fleury2014}), researchers and users from
academy and industry have shown an increased interest to
\emph{formally} prove the validity of \ATPs' results.

In order to give confidence to the \ATP users, many of these system
have started to include in their outputs the full derivations
associated to the proved theorems. However, existing research
recognizes that in many cases these proofs encode non-trivial
reasoning hard to reconstruct and therefore hard to
verify~\cite{paulson2007source,Keller2013}.

Proof-reconstruction address this problem. It becomes in mostly cases
a reverse engineering task to verify the prover reasoning. That
usually happen when the reconstruction is made by another and not by
the developers of the \ATP. The presentation of the proofs generated
by the prover play an important role in proof-reconstruction. To
verify such a proof, it is convenient to have it in a consistent
format, that is, a full script describing step-by-step with exhaustive
details and without ambiguities, the derivation to get the proof. For
classical propositional logic (henceforth \CPL) from a list of at
least forty \ATPs---available from the Web service \name{SystemOnTPTP}
of the TPTP World---just few of them show their proofs.

One approach to address the proof-reconstruction problem is
integrating the \ATP, the \emph{source} system, with a
proof-assistant, the \emph{target} system. The target system is the
proof \emph{checker} in charge to verify the source system reasoning.
These proof-assistants allow us to formalize the logical system used
in the proofs, \ie, logical constants, axioms, inference rules,
hypotheses, and theorems. A proof-reconstruction tool provides such an
integration, translating the derivation generated by the prover into
the formalism of the proof-assistant.

Previous studies have reported proof-reconstruction using
proof-assistants based on higher-order logic where the development is
at a mature
stage~\cite{paulson2010three,hurlin07practical,kaliszyk2013}. Another
approaches has been proposed for proof-reconstructing using type
theory~\cite{Bezem2002,armand2011,Ekici2017,kanso2016light}.

We describe a formal reconstruction of proofs generated by the \Metis
prover~\cite{hurd2003first}---our source system---in Martin-LÃ¶f type
theory~\cite{Nordstrom-Petersson-Smith-1990}. We
formalize the subset of the \Metis inference rules for the
propositional logic fragment using a syntactical treatment of the
logic. The \Metis reasoning was formalized in
\Agda~\cite{agdateam}---our target system---in two
libraries~\cite{AgdaProp,AgdaMetis} and we implemented a
proof-reconstruction tool named \Athena~\cite{Athena} written in
\Haskell that is able to generate \Agda proof-terms for \Metis
derivations.

This paper has been organized in the following way.
In Section~\ref{sec:type-theory} some limitations of type theory
are discussed from proof-reconstruction point view.
In Section~\ref{sec:metis-language-and-proofs}, we introduce the
\Metis prover.
In Section~\ref{sec:proof-reconstruction} we show our
approach to reconstruct \Metis proofs.
Related work is described in Section~\ref{sec:related-work}.
Conclusions and suggestions for future work are  presented in
Section~\ref{sec:conclusions}.

% Finally, in appendix \textsc{A}, we provide a small example of the
% proof-reconstruction workflow.

The source codes accompanying this paper (programs, libraries, and
examples) are available as repositories at \verb!GitHub!:

\begin{itemize}
  \item The \Athena program that translates proofs generated by \Metis to \Agda:
  \url{http://github.com/jonaprieto/athena}.
  \item The \verb!agda-prop! library as a formalization in \Agda for
    classical propositional logic:
  \url{http://github.com/jonaprieto/agda-prop}.
\item The \verb!agda-metis! library as a formalization in \Agda to
  justify \Metis proofs of classical propositional logic:
  \url{http://github.com/jonaprieto/agda-prop}.
\end{itemize}

The proof-reconstruction was carried on for \Metis~2.3
(release~20170822), and the accompanying source code was tested with
\Agda~2.5.3, \Agda standard library~0.14 and \prg{GHC}~8.2.1.

\end{document}
